<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jbp.service.dao.TankOrdersDao">

    <select id="getAdminPageList" resultType="com.jbp.common.response.TankOrderAdminListResponse">

        select o.*,u.username ,u2.username as storeusername from tankorders  o
		left join user u on u.id = o.userId
		left join user u2 on u2.id = o.storeUserId
		where 1=1

        <if test="username != null and username !=''">
            AND  ( u2.username =  #{username} or u2.id =  #{username} )
        </if>
        <if test="status != null and status !=''">
            AND   o.status =   #{status}
        </if>

        <if test="startCreateTime != null and startCreateTime !=''">
            AND   o.payTime >=  #{startCreateTime}
        </if>

        <if test="endCreateTime != null and endCreateTime !=''">
            AND   o.payTime <![CDATA[ <=  ]]>  #{endCreateTime}
        </if>

		order by o.createdTime desc

    </select>
</mapper>
